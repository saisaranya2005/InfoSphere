<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InfoSphere</title>
    <style>
        /* Base styling */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #ffebee;
            color: #212121;
            overflow-x: hidden;
        }
        h1 {
            text-align: center;
            font-size: 2.5em;
            color: #ff5722;
            text-shadow: 2px 2px #ffe0b2;
        }
        h2 {
            color: #055c18;
            text-align: center;
            padding: 10px;
            border-radius: 10px;
        }

        /* Adding emojis and shadows to headers */
        h1::before {
            content: "üåç ";
            font-size: 1.2em;
        }
        h1::after {
            content: " üåé";
            font-size: 1.2em;
        }

        .section {
            margin-bottom: 20px;
            padding: 25px;
            background: linear-gradient(135deg, #ffffff, #ffecb3);
            border-radius: 20px;
            box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.5s ease-in-out;
            position: relative;
        }
        .section:hover {
            transform: scale(1.03) rotate(1deg);
        }
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            background-color: #e05422;
            color: white;
            transition: background-color 0.3s, transform 0.2s;
}
        button:hover {
            background-color: #d84315;
            transform: translateY(-5px);
        }
        .delete-button {
            background-color: #e53935;
        }
        .delete-button:hover {
            background-color: #b71c1c;
        }

        input, select {
            padding: 15px;
            border: 2px solid #ffc107;
            border-radius: 30px;
            width: calc(100% - 32px);
            box-sizing: border-box;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            margin-top: 12px;
            font-size: 1em;
            background: #fffde7;
        }
        input:focus, select:focus {
            border-color: #ff9800;
            box-shadow: 0px 0px 10px rgba(255, 152, 0, 0.5);
            outline: none;
        }

        /* Topic list styling */
        .topic-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
            padding: 15px;
            background-color: #ffe0b2;
            border: 2px solid #ffcc80;
            border-radius: 15px;
            box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.15);
            transition: transform 0.4s ease-in-out;
        }
        .topic-item:hover {
            transform: scale(1.05);
        }

        /* Pre-styling for displaying content */
        pre {
            background-color: #fce4ec;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.1);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* Gallery styling */
        .gallery-section img {
            width: 280px;
            height: 280px;
            object-fit: cover;
            margin: 10px;
            border-radius: 15px;
            transition: transform 0.4s, box-shadow 0.4s;
            box-shadow: 0px 3px 10px rgba(0, 0, 0, 0.2);
        }
        .gallery-section img:hover {
            transform: scale(1.08);
            box-shadow: 0px 6px 15px rgba(0, 0, 0, 0.25);
        }

        /* Buttons for generating and viewing content */
        .button-group {
            text-align: center;
            margin-top: 20px;
        }
        .container {
    max-width: 600px;
    margin: auto;
    padding: 20px;
    background-color: #efd2db;
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    line-height: 50px;
}


select, button {
    padding: 10px;
    margin: 5px 0;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 16px;
}


.quiz-container {
    margin-top: 20px;
}

.quiz-question {
    background-color: #f9f9f9;
    padding: 15px;
    margin: 10px 0;
    border-radius: 6px;
    border: 1px solid #ddd;
}

input[type="text"] {
    width: calc(100% - 22px);
    padding: 10px;
    margin: 10px 0;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.correctAnswer {
    color: #d9534f;
    font-weight: bold;
}

.result-card {
    margin-top: 20px;
    padding: 15px;
    background-color: #28a745;
    color: white;
    border-radius: 6px;
    text-align: center;
}
    </style>
</head>
<body>
    <h1>InfoSphere</h1>

    <!-- Content List Section -->
    <div class="section" id="contentListSection">
        <h2>Available Content üìú</h2>
        <div class="button-group">
            <button onclick="fetchContentList()">üß≠ View All Generated Content</button>
        </div>
        <ul id="contentList"></ul>
    </div>

    <!-- Generate Content Section -->
    <div class="section" id="generateContentSection">
        <h2>Generate New Content üìù</h2>
        <input type="text" id="culturalTopic" placeholder="Enter Cultural Topic üé≠" required>
        <select id="targetLanguage">
            <option value="en">English</option>
            <option value="hi">Hindi</option>
            <option value="es">Spanish</option>
            <option value="fr">French</option>
            <option value="hi">Hindi</option>
            <option value="bn">Bengali</option>
            <option value="te">Telugu</option>
            <option value="ta">Tamil</option>
            <option value="mr">Marathi</option>
            <option value="ur">Urdu</option>
            <option value="gu">Gujarati</option>
            <option value="ml">Malayalam</option>
            <option value="kn">Kannada</option>
            <option value="pa">Punjabi</option>
            <option value="as">Assamese</option>
            <option value="or">Odia</option>
            <option value="ne">Nepali</option>
            <!-- Add more languages as needed -->
        </select>
        <label>
            <input type="checkbox" id="textToSpeech"> üéß Enable Text-to-Speech
        </label>
        <div class="button-group">
            <button onclick="generateContent()">‚ú® Generate Content</button>
        </div>
    </div>

    <!-- Display Content Section -->
    <div class="section" id="displayContentSection">
        <h2>Content Display üìñ</h2>
        <pre id="contentDisplay">Generated content will appear here...</pre>
        <audio id="audioPlayer" controls style="display: none;"></audio>
    </div>

    <!-- Wikipedia Resources Section -->
    <div class="section" id="wikipediaSection">
        <h2>Additional Resources from Wikipedia üìö</h2>
        <div id="wikipediaLinks">Relevant Wikipedia articles will appear here...</div>
    </div>

    <!-- Image Gallery Section -->
    <div class="section gallery-section" id="gallerySection">
        <h2>Image Gallery üì∏</h2>
        <div id="imageGallery">Related images will appear here...</div>
    </div>
    
    <!--Quiz-->
    <div class="container">
        <h2>Trivia Quiz Application</h2>
        <label for="topicSelect">Select a category:</label>
        <select id="topicSelect">
            <option value="">Select a category</option>
            <option value="music">Music</option>
            <option value="artliterature">Art & Literature</option>
            <option value="language">Language</option>
            <option value="sciencenature">Science & Nature</option>
            <option value="general">General Knowledge</option>
            <option value="fooddrink">Food & Drink</option>
            <option value="peopleplaces">People & Places</option>
            <option value="geography">Geography</option>
            <option value="historyholidays">History & Holidays</option>
            <option value="entertainment">Entertainment</option>
            <option value="toysgames">Toys & Games</option>
            <option value="mathematics">Mathematics</option>
    
            <!-- Add more categories as needed -->
        </select>
        <button id="generateQuiz">Generate Quiz</button>
        <button id="resetQuiz">Reset Quiz</button>

        <div id="quizContainer" class="quiz-container"></div>
        <div id="resultCard" class="result-card" style="display: none;">
            <p>Your quiz has been completed. Check your answers!</p>
        </div>
    </div>

    <script>
        const apiUrl = "";//replace with rest api created in api gateway
        const unsplashAccessKey = ""; // Replace with your Unsplash access key

        function normalizeTopic(topic) {
            return topic.trim().toLowerCase();
        }

        async function fetchImagesFromUnsplash(topic) {
            try {
                const response = await fetch(`https://api.unsplash.com/search/photos?query=${topic}&client_id=${unsplashAccessKey}&per_page=6`);
                const data = await response.json();
                const gallery = document.getElementById('imageGallery');
                gallery.innerHTML = ''; // Clear previous images

                if (data.results && data.results.length > 0) {
                    data.results.forEach(photo => {
                        const img = document.createElement('img');
                        img.src = photo.urls.small;
                        img.alt = topic;
                        gallery.appendChild(img);
                    });
                } else {
                    gallery.innerHTML = 'No images found for this topic.';
                }
            } catch (error) {
                console.error("Error fetching images from Unsplash:", error);
            }
        }

        async function fetchContentList() {
            try {
                const response = await fetch(`${apiUrl}/content`, {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' }
                });
                const data = await response.json();
                const contentList = document.getElementById('contentList');
                contentList.innerHTML = ''; // Clear previous list
                
                if (data.history) {
                    data.history.forEach(item => {
                        const normalizedItem = item.replace("cultural-content/", "").replace(".json", "");
                        const listItem = document.createElement('li');
                        listItem.classList.add('topic-item');

                        const topicName = document.createElement('span');
                        topicName.textContent = normalizedItem;

                        const viewButton = document.createElement('button');
                        viewButton.textContent = 'üëÅÔ∏è View';
                        viewButton.onclick = () => fetchContent(normalizedItem);

                        const deleteButton = document.createElement('button');
                        deleteButton.textContent = 'üóëÔ∏è Delete';
                        deleteButton.classList.add('delete-button');
                        deleteButton.onclick = () => deleteContent(normalizedItem);

                        listItem.appendChild(topicName);
                        listItem.appendChild(viewButton);
                        listItem.appendChild(deleteButton);
                        contentList.appendChild(listItem);
                    });
                }
            } catch (error) {
                console.error("Error fetching content list:", error);
            }
        }

        async function fetchContent(contentKey) {
    try {
        const topic = normalizeTopic(contentKey);
        const targetLanguage = document.getElementById('targetLanguage').value;
        const textToSpeech = document.getElementById('textToSpeech').checked;

        const response = await fetch(`${apiUrl}/content`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ cultural_topic: topic, target_language: targetLanguage, text_to_speech: textToSpeech })
        });

        // If the response is not OK (e.g., 400 error), stop further execution
        if (!response.ok) {
            document.getElementById('contentDisplay').textContent = "Content could not be generated due to inappropriate topic.";
            document.getElementById('imageGallery').innerHTML = '';  // Clear the gallery section
            document.getElementById('wikipediaLinks').innerHTML = ''; // Clear Wikipedia links
            return; // Stop execution if inappropriate content
        }

        const data = await response.json();
        
        // Display content if generation was successful
        document.getElementById('contentDisplay').textContent = data.content || "Content not found";

        if (data.audio) {
            const audioPlayer = document.getElementById('audioPlayer');
            audioPlayer.src = `data:audio/mp3;base64,${data.audio}`;
            audioPlayer.style.display = 'block';
        }

        // Fetch related images and Wikipedia resources if content was generated successfully
        await fetchImagesFromUnsplash(topic);
        await fetchWikipediaResources(topic);
    } catch (error) {
        console.error("Error fetching content:", error);
    }
}


        async function fetchWikipediaResources(topic) {
            const wikipediaUrl = `https://en.wikipedia.org/w/api.php?action=opensearch&search=${topic}&limit=5&format=json&origin=*`;
            try {
                const response = await fetch(wikipediaUrl);
                const data = await response.json();
                const linksContainer = document.getElementById('wikipediaLinks');
                linksContainer.innerHTML = ''; // Clear previous links

                if (data[1].length > 0) {
                    data[1].forEach((title, index) => {
                        const link = document.createElement('a');
                        link.href = data[3][index];
                        link.target = '_blank';
                        link.textContent = title;
                        link.style.display = 'block';
                        link.style.color = '#8e24aa';
                        link.style.textDecoration = 'none';
                        link.style.padding = '5px 0';

                        linksContainer.appendChild(link);
                    });
                } else {
                    linksContainer.textContent = 'No Wikipedia articles found.';
                }
            } catch (error) {
                console.error("Error fetching Wikipedia links:", error);
            }
        }

        async function generateContent() {
            const topic = document.getElementById('culturalTopic').value;
            if (!topic) {
                alert("Please enter a cultural topic.");
                return;
            }
            fetchContent(topic);
        }

        async function deleteContent(contentKey) {
            try {
                const response = await fetch(`${apiUrl}/content`, {
                    method: 'DELETE',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ cultural_topic: contentKey })
                });

                if (response.ok) {
                    alert('Content deleted successfully');
                    fetchContentList();
                }
            } catch (error) {
                console.error("Error deleting content:", error);
            }
        }

        const apiKey = ""; // Your API Ninjas key
const baseUrl = "https://api.api-ninjas.com/v1/trivia?category=";

document.getElementById('generateQuiz').addEventListener('click', async () => {
    const selectedCategory = document.getElementById('topicSelect').value;
    const quizContainer = document.getElementById('quizContainer');
    const resultCard = document.getElementById('resultCard');

    // Clear previous results and hide the result card
    quizContainer.innerHTML = "";
    resultCard.style.display = "none";

    if (!selectedCategory) {
        alert("Please select a category!");
        return;
    }

    try {
        const response = await fetch(`${baseUrl}${selectedCategory}`, {
            headers: {
                "X-Api-Key": apiKey,
            },
        });

        if (!response.ok) {
            throw new Error("Failed to fetch trivia questions.");
        }

        const triviaData = await response.json();

        if (triviaData.length === 0) {
            quizContainer.innerHTML = "<p>No questions available for this category.</p>";
            return;
        }

        triviaData.forEach(trivia => {
            const questionDiv = document.createElement('div');
            questionDiv.classList.add('quiz-question');

            // Create elements for the question, answer input, and buttons
            questionDiv.innerHTML = `
                <strong>${trivia.question}</strong>
                <input type="text" class="answerInput" placeholder="Your answer here" />
                <button class="checkAnswer">Check Answer</button>
                <button class="showAnswer" style="display: none;">Show Answer</button>
                <div class="correctAnswer" style="display: none;">Correct Answer: <em>${trivia.answer}</em></div>
            `;

            quizContainer.appendChild(questionDiv);

            // Add event listener for the check answer button
            questionDiv.querySelector('.checkAnswer').addEventListener('click', () => {
                const userAnswer = questionDiv.querySelector('.answerInput').value.trim();
                const correctAnswer = trivia.answer.trim();
                const showAnswerButton = questionDiv.querySelector('.showAnswer');
                const correctAnswerDiv = questionDiv.querySelector('.correctAnswer');

                // Check the user's answer
                if (userAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
                    alert("Correct! üéâ");
                } else {
                    alert("Wrong answer! üòû");
                    showAnswerButton.style.display = 'inline'; // Show the button to reveal the answer
                }
            });

            // Add event listener for the show answer button
            questionDiv.querySelector('.showAnswer').addEventListener('click', () => {
                questionDiv.querySelector('.correctAnswer').style.display = 'block';
                alert("Feeling less knowledgeable? Learn more from the content!");
            });
        });

        // Show the result card after the quiz
        resultCard.style.display = "block";

    } catch (error) {
        console.error("Error:", error);
        quizContainer.innerHTML = "<p>Something went wrong. Please try again later.</p>";
    }
});

// Reset quiz function
function resetQuiz() {
    const quizContainer = document.getElementById('quizContainer');
    quizContainer.innerHTML = ""; // Clear quiz questions and input fields
    document.getElementById('topicSelect').value = ""; // Reset category selection
    document.getElementById('resultCard').style.display = "none"; // Hide the result card
}

// Add event listener for the reset button
document.getElementById('resetQuiz').addEventListener('click', resetQuiz);



        
    </script>
</body>
</html>
